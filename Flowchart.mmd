%%{init: {'flowchart': {'curve': 'basis', 'htmlLabels': true}}}%%
flowchart TB
    %% --- Section 1: Rich Text & Icons (Markdown Support) ---
    
    %% Node with Markdown string (Bold, Italic, Newline)
    InfoNode["`**Markdown Node**
    Supports _Italics_
    and Multi-line text`"]

    %% Node with FontAwesome Icon (GitHub Safe)
    UserNode@{ icon: "fa:users", label: "User Group", pos: "b"}

    %% --- Section 2: The New Shape Syntax (v11.3+) ---
    subgraph Shapes ["âœ¨ New Semantic Shapes"]
        direction LR
        
        %% Infrastructure Shapes
        Cloud@{ shape: cloud, label: "AWS Cloud" }
        DB@{ shape: cyl, label: "Database" }
        
        %% Logic Shapes
        Event@{ shape: bolt, label: "Trigger" }
        Delay@{ shape: delay, label: "Wait 5s" }
        
        %% Document Shapes
        Report@{ shape: docs, label: "Multi-Docs" }
        Note@{ shape: brace-r, label: "Annotation" }

        %% Connections
        Cloud --> Event --> Delay
        Event -.- Note
    end

    %% --- Section 3: Advanced Edges, Chaining & Animation ---
    subgraph Connections ["ðŸ”— Advanced Linking"]
        direction TB
        
        Step1[Start]
        Step2(Process)
        Step3{Decision}
        
        %% 1. Multi-Node Chaining (Connecting 1 to 2 & 3 simultaneously)
        Step1 -- Action --> Step2 & Step3
        
        %% 2. Extended Link Length (Manual adjustment with ----)
        Step2 ---->|Long Link| EndNode(((End)))
        
        %% 3. Special Arrow Heads (Circle & Cross)
        Step3 o--o CircleEdge[Circle]
        Step3 x--x CrossEdge[Cross]

        %% 4. Animated Edge (The "Running Ants" effect)
        CrossEdge edgeAnim@==> Step1
        edgeAnim@{ animate: true, animation: slow, label: "Loop Back" }
    end

    %% --- Section 4: Nested Layouts & Invisible Links ---
    subgraph Layout ["ðŸ“ Layout & Subgraphs"]
        direction LR
        
        %% Nested Subgraph with Reverse Direction (Bottom-to-Top)
        subgraph Inner ["Reverse Logic (BT)"]
            direction BT
            ItemBottom --> ItemTop
        end
        
        %% Invisible Link (~~~) for manual spacing
        Inner ~~~ FloatingNode{{Isolated Hex}}
    end

    %% --- Section 5: Interaction & Global Styling ---
    
    %% Connect the main sections
    UserNode ==> Cloud
    Report -.-> Step1
    
    %% Interaction: Click to open URL
    click UserNode "https://github.com" "Open GitHub"

    %% Styling: Define CSS Classes
    classDef crucial fill:#f96,stroke:#333,stroke-width:2px,color:white;
    classDef ghost fill:none,stroke:#999,stroke-dasharray: 5 5;

    %% Apply Classes
    class Event,Step3 crucial;
    class Note,FloatingNode ghost;

    %% Style a specific link by index (0, 1, 2...)
    linkStyle 0 stroke:blue,stroke-width:2px;
